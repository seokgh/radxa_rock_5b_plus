
https://docs.radxa.com/en/rock5/rock5b/other-os/yocto
  ---> Community version
        ---> Click [Community Yocto]
                ---> https://github.com/radxa/meta-rockchip/tree/scarthgap


----------------------------------------------------------------------------------
Build Host
----------------------------------------------------------------------------------
To install the required packages on a Debian/Ubuntu run

$ sudo apt install gawk wget git diffstat unzip texinfo gcc build-essential \
    chrpath socat cpio python3 python3-pip python3-pexpect xz-utils \
    debianutils iputils-ping python3-git python3-jinja2 libegl1-mesa \
    libsdl1.2-dev pylint xterm python3-subunit mesa-common-dev zstd liblz4-tool

----------------------------------------------------------------------------------
Configure Yocto/OE
----------------------------------------------------------------------------------
In order to build an image, you need to download some layers.

~ $ mkdir yocto; cd yocto
~/yocto $ git clone git://git.openembedded.org/bitbake -b master
~/yocto $ git clone git://git.openembedded.org/openembedded-core -b scarthgap
~/yocto $ git clone git://git.yoctoproject.org/meta-arm -b scarthgap
~/yocto $ git clone git://git.openembedded.org/meta-openembedded -b scarthgap
~/yocto $ git clone git@github.com:radxa/meta-rockchip.git -b scarthgap     // NG, Use this --->  $ git clone git://git.yoctoproject.org/meta-rockchip -b scarthgap
~/yocto $ git clone git://git.yoctoproject.org/meta-virtualization -b scarthgap


위 내용대로 했는데 잘 안되서, 추가로 아래처럼 환경을 만드니 컴파일이 정상적으로 시작됬다!!!

----------------------------------------------------------------------------------
step1. 먼저 각 repo 리스트
----------------------------------------------------------------------------------
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk $ ls -lh
total 164K
lrwxrwxrwx  1 seokgh seokgh   12  3월 22 20:08 bitbake -> poky/bitbake
drwxrwxr-x  6 seokgh seokgh 4.0K  3월 25 23:55 build
-rwxrwxrwx  1 seokgh seokgh  649  3월 26 00:10 git_info_output.sh
drwxrwxr-x  4 seokgh seokgh 4.0K  3월 26 00:05 meta-browser
drwxrwxr-x 13 seokgh seokgh 4.0K  3월 25 23:28 meta-clang
drwxrwxr-x  8 seokgh seokgh 4.0K  3월 25 23:55 meta-lts-mixins
drwxrwxr-x 13 seokgh seokgh 4.0K  3월 25 23:26 meta-openembedded
lrwxrwxrwx  1 seokgh seokgh   14  3월 22 20:08 meta-poky -> poky/meta-poky
drwxrwxr-x 15 seokgh seokgh 4.0K  3월 25 23:39 meta-rockchip
lrwxrwxrwx  1 seokgh seokgh   22  3월 22 20:08 oe-init-build-env -> poky/oe-init-build-env
drwxrwxr-x  5 seokgh seokgh 128K  3월 26 00:09 packages
drwxrwxr-x 11 seokgh seokgh 4.0K  3월 25 23:27 poky
lrwxrwxrwx  1 seokgh seokgh   12  3월 22 20:08 scripts -> poky/scripts
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk $ 


----------------------------------------------------------------------------------
step2. 각 repo 를 가져온 곳
----------------------------------------------------------------------------------
📂 meta-browser/
  🏷️ Branch: scarthgap
  🔗 Remotes:
    browser	https://github.com/OSSystems/meta-browser (fetch)
    browser	https://github.com/OSSystems/meta-browser (push)

📂 meta-clang/
  🏷️ Branch: scarthgap
  🔗 Remotes:
    clang	https://github.com/kraj/meta-clang (fetch)
    clang	https://github.com/kraj/meta-clang (push)

📂 meta-lts-mixins/
  🏷️ Branch: scarthgap/rust
  🔗 Remotes:
    origin	https://git.yoctoproject.org/meta-lts-mixins (fetch)
    origin	https://git.yoctoproject.org/meta-lts-mixins (push)

📂 meta-openembedded/
  🏷️ Branch: scarthgap
  🔗 Remotes:
    oe	git://git.openembedded.org/meta-openembedded (fetch)
    oe	git://git.openembedded.org/meta-openembedded (push)

📂 meta-rockchip/
  🏷️ Branch: scarthgap-vendor
  🔗 Remotes:
    origin	https://github.com/radxa/meta-rockchip.git (fetch)
    origin	https://github.com/radxa/meta-rockchip.git (push)

📂 poky/
  🏷️ Branch: scarthgap
  🔗 Remotes:
    yocto	git://git.yoctoproject.org/poky (fetch)
    yocto	git://git.yoctoproject.org/poky (push)



----------------------------------------------------------------------------------
step3. build/conf/bblayers.conf 파일은 아래내용을 사용
----------------------------------------------------------------------------------
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk/build/conf (scarthgap) $ cat bblayers.conf 
# POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf
# changes incompatibly
POKY_BBLAYERS_CONF_VERSION = "2"

BBPATH = "${TOPDIR}"
BBFILES ?= ""

BBLAYERS ?= " \
  ${TOPDIR}/../meta-openembedded/meta-oe \
  ${TOPDIR}/../meta-openembedded/meta-python \
  ${TOPDIR}/../meta-openembedded/meta-networking \
  ${TOPDIR}/../meta-openembedded/meta-multimedia \
  ${TOPDIR}/../meta-browser/meta-chromium \
  ${TOPDIR}/../meta-lts-mixins \
  ${TOPDIR}/../meta-clang \
  ${TOPDIR}/../meta-rockchip \
  ${TOPDIR}/../poky/meta \
  ${TOPDIR}/../poky/meta-poky \
  ${TOPDIR}/../poky/meta-yocto-bsp \
"

----------------------------------------------------------------------------------
step4. build/conf/local.conf 파일은 아래내용을 사용
----------------------------------------------------------------------------------
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk/build/conf (scarthgap) $ cat local.conf 
include include/common.conf
include include/demo.conf

MACHINE = "rockchip-rk3588-rock-5b"

----------------------------------------------------------------------------------
step5. 위 처럼 준비해놓으면 컴파일이 된다
----------------------------------------------------------------------------------
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk $ source ./oe-init-build-env
seokgh@ubuntu22 ~/Documents/work/yocto/yocto-rockchip-sdk/build $ bitbake core-image-weston
